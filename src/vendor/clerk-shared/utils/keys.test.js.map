{"version":3,"sources":["../../../src/utils/keys.test.ts"],"sourcesContent":["import {\n  buildPublishableKey,\n  createDevOrStagingUrlCache,\n  isLegacyFrontendApiKey,\n  isPublishableKey,\n  parsePublishableKey,\n} from './keys';\n\ndescribe('buildPublishableKey(key)', () => {\n  const cases = [\n    ['example.clerk.accounts.dev', 'pk_live_ZXhhbXBsZS5jbGVyay5hY2NvdW50cy5kZXYk'],\n    ['foo-bar-13.clerk.accounts.dev', 'pk_test_Zm9vLWJhci0xMy5jbGVyay5hY2NvdW50cy5kZXYk'],\n  ];\n\n  test.each(cases)(\n    'given %p as a frontend api, returns publishable key %p',\n    (frontendApi, expectedPublishableKeyStr) => {\n      const result = buildPublishableKey(frontendApi);\n      expect(result).toEqual(expectedPublishableKeyStr);\n    },\n  );\n});\n\ndescribe('parsePublishableKey(key)', () => {\n  const cases = [\n    [null, null],\n    [undefined, null],\n    ['', null],\n    ['whatever', null],\n    [\n      'pk_live_ZXhhbXBsZS5jbGVyay5hY2NvdW50cy5kZXYk',\n      { instanceType: 'production', frontendApi: 'example.clerk.accounts.dev' },\n    ],\n    [\n      'pk_test_Zm9vLWJhci0xMy5jbGVyay5hY2NvdW50cy5kZXYk',\n      { instanceType: 'development', frontendApi: 'foo-bar-13.clerk.accounts.dev' },\n    ],\n  ];\n\n  test.each(cases)('given %p as a publishable key string, returns %p', (publishableKeyStr, expectedPublishableKey) => {\n    const result = parsePublishableKey(publishableKeyStr);\n    expect(result).toEqual(expectedPublishableKey);\n  });\n});\n\ndescribe('isPublishableKey(key)', () => {\n  it('returns true if the key is a valid publishable key', () => {\n    expect(isPublishableKey('pk_live_Y2xlcmsuY2xlcmsuZGV2JA==')).toBe(true);\n  });\n\n  it('returns false if the key is not a valid publishable key', () => {\n    expect(isPublishableKey('clerk.clerk.com')).toBe(false);\n  });\n});\n\ndescribe('isLegacyFrontendApiKey(key)', () => {\n  it('returns true if the key is a valid legacy frontend Api key', () => {\n    expect(isLegacyFrontendApiKey('clerk.clerk.com')).toBe(true);\n  });\n  it('returns true if the key is not a valid legacy frontend Api key', () => {\n    expect(isLegacyFrontendApiKey('pk_live_Y2xlcmsuY2xlcmsuZGV2JA==')).toBe(false);\n  });\n});\n\ndescribe('isDevOrStagingUrl(url)', () => {\n  const { isDevOrStagingUrl } = createDevOrStagingUrlCache();\n\n  const goodUrls: Array<[string | URL, boolean]> = [\n    ['https://www.google.com', false],\n    ['https://www.clerk.dev', false],\n    ['https://www.lclclerk.com', false],\n    ['clerk.prod.lclclerk.com', false],\n    ['something.dev.lclclerk.com', true],\n    ['something.lcl.dev', true],\n    ['https://www.something.stg.lclclerk.com', true],\n    [new URL('https://www.lclclerk.com'), false],\n    [new URL('https://www.something.stg.lclclerk.com'), true],\n    [new URL('https://www.something.stg.lclclerk.com:4000'), true],\n  ];\n\n  const badUrls: Array<[string | null, boolean]> = [\n    ['', false],\n    [null, false],\n  ];\n\n  test.each([...goodUrls, ...badUrls])('.isDevOrStagingUrl(%s)', (a, expected) => {\n    // @ts-ignore\n    expect(isDevOrStagingUrl(a)).toBe(expected);\n  });\n});\n"],"mappings":"AAAA;AAAA,EACE;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACK;AAEP,SAAS,4BAA4B,MAAM;AACzC,QAAM,QAAQ;AAAA,IACZ,CAAC,8BAA8B,8CAA8C;AAAA,IAC7E,CAAC,iCAAiC,kDAAkD;AAAA,EACtF;AAEA,OAAK,KAAK,KAAK;AAAA,IACb;AAAA,IACA,CAAC,aAAa,8BAA8B;AAC1C,YAAM,SAAS,oBAAoB,WAAW;AAC9C,aAAO,MAAM,EAAE,QAAQ,yBAAyB;AAAA,IAClD;AAAA,EACF;AACF,CAAC;AAED,SAAS,4BAA4B,MAAM;AACzC,QAAM,QAAQ;AAAA,IACZ,CAAC,MAAM,IAAI;AAAA,IACX,CAAC,QAAW,IAAI;AAAA,IAChB,CAAC,IAAI,IAAI;AAAA,IACT,CAAC,YAAY,IAAI;AAAA,IACjB;AAAA,MACE;AAAA,MACA,EAAE,cAAc,cAAc,aAAa,6BAA6B;AAAA,IAC1E;AAAA,IACA;AAAA,MACE;AAAA,MACA,EAAE,cAAc,eAAe,aAAa,gCAAgC;AAAA,IAC9E;AAAA,EACF;AAEA,OAAK,KAAK,KAAK,EAAE,oDAAoD,CAAC,mBAAmB,2BAA2B;AAClH,UAAM,SAAS,oBAAoB,iBAAiB;AACpD,WAAO,MAAM,EAAE,QAAQ,sBAAsB;AAAA,EAC/C,CAAC;AACH,CAAC;AAED,SAAS,yBAAyB,MAAM;AACtC,KAAG,sDAAsD,MAAM;AAC7D,WAAO,iBAAiB,kCAAkC,CAAC,EAAE,KAAK,IAAI;AAAA,EACxE,CAAC;AAED,KAAG,2DAA2D,MAAM;AAClE,WAAO,iBAAiB,iBAAiB,CAAC,EAAE,KAAK,KAAK;AAAA,EACxD,CAAC;AACH,CAAC;AAED,SAAS,+BAA+B,MAAM;AAC5C,KAAG,8DAA8D,MAAM;AACrE,WAAO,uBAAuB,iBAAiB,CAAC,EAAE,KAAK,IAAI;AAAA,EAC7D,CAAC;AACD,KAAG,kEAAkE,MAAM;AACzE,WAAO,uBAAuB,kCAAkC,CAAC,EAAE,KAAK,KAAK;AAAA,EAC/E,CAAC;AACH,CAAC;AAED,SAAS,0BAA0B,MAAM;AACvC,QAAM,EAAE,kBAAkB,IAAI,2BAA2B;AAEzD,QAAM,WAA2C;AAAA,IAC/C,CAAC,0BAA0B,KAAK;AAAA,IAChC,CAAC,yBAAyB,KAAK;AAAA,IAC/B,CAAC,4BAA4B,KAAK;AAAA,IAClC,CAAC,2BAA2B,KAAK;AAAA,IACjC,CAAC,8BAA8B,IAAI;AAAA,IACnC,CAAC,qBAAqB,IAAI;AAAA,IAC1B,CAAC,0CAA0C,IAAI;AAAA,IAC/C,CAAC,IAAI,IAAI,0BAA0B,GAAG,KAAK;AAAA,IAC3C,CAAC,IAAI,IAAI,wCAAwC,GAAG,IAAI;AAAA,IACxD,CAAC,IAAI,IAAI,6CAA6C,GAAG,IAAI;AAAA,EAC/D;AAEA,QAAM,UAA2C;AAAA,IAC/C,CAAC,IAAI,KAAK;AAAA,IACV,CAAC,MAAM,KAAK;AAAA,EACd;AAEA,OAAK,KAAK,CAAC,GAAG,UAAU,GAAG,OAAO,CAAC,EAAE,0BAA0B,CAAC,GAAG,aAAa;AAE9E,WAAO,kBAAkB,CAAC,CAAC,EAAE,KAAK,QAAQ;AAAA,EAC5C,CAAC;AACH,CAAC;","names":[]}